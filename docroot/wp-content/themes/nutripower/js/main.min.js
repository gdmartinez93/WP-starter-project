/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/main.js":
/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


$ = jQuery;

var header = __webpack_require__(/*! ./organisms/header/header */ "./src/organisms/header/header.js")();

var pageSorting = __webpack_require__(/*! ./pages/page-sorting/page-sorting */ "./src/pages/page-sorting/page-sorting.js")();

var menuNavigation = __webpack_require__(/*! ./molecules/menu-navigation/menu-navigation */ "./src/molecules/menu-navigation/menu-navigation.js")();
var product = __webpack_require__(/*! ./molecules/product/product */ "./src/molecules/product/product.js")();

var forms = __webpack_require__(/*! ./molecules/forms/forms */ "./src/molecules/forms/forms.js")();

var homepage = __webpack_require__(/*! ./pages/homepage/homepage */ "./src/pages/homepage/homepage.js")();
var productPage = __webpack_require__(/*! ./pages/product/product */ "./src/pages/product/product.js")();
var pageContent = __webpack_require__(/*! ./pages/page-content/page-content */ "./src/pages/page-content/page-content.js")();

/***/ }),

/***/ "./src/molecules/forms/forms.js":
/*!**************************************!*\
  !*** ./src/molecules/forms/forms.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    var $inputNumber = $('.nutripower input[type="number"]:not(#billing_dni)');
    if ($inputNumber.length > 0) {
        $inputNumber.each(function () {
            $('<span class="input-number-handler input-number-handler--add">+</span>').insertAfter($(this));
            $('<span class="input-number-handler input-number-handler--less">-</span>').insertAfter($(this));

            function handlerInput($input, action) {
                console.log('value ', $input.val());
                $input.focus();

                if ($input.val() === '') {
                    $input.val(0);
                }

                if (action === 'add') {
                    $input.val(Number($input.val()) + 1);
                } else {
                    $input.val(Number($input.val()) - 1);
                }

                console.log('after ', $input.val());
            }

            var $less = $(this).siblings('span').first();
            $less.on('click', function () {
                handlerInput ($(this).siblings('input'), 'less');
            });
            var $add = $(this).siblings('span').last();
            $add.on('click', function () {
                handlerInput ($(this).siblings('input'), 'add')
            });
        });
    }

    var $selects = $('select');
    $selects.wrap('<div class="select-wrapper"></div>');
    
    setTimeout(function () {
        var $labelTermsConditionsCheckout = $('.woocommerce-terms-and-conditions-checkbox-text').parent();
        if ($labelTermsConditionsCheckout.length > 0) {
            var $checkbox = $labelTermsConditionsCheckout.children('input[type="checkbox"]');
            $checkbox.insertBefore($labelTermsConditionsCheckout);
            $labelTermsConditionsCheckout.attr('for', $checkbox.attr('id'));
        }

        if ($selects.parent().find('.select2-hidden-accessible').length > 0) {
            $selects.parent().addClass('no-arrow');
        }
    }, 2500);
}

/***/ }),

/***/ "./src/molecules/menu-navigation/menu-navigation.js":
/*!**********************************************************!*\
  !*** ./src/molecules/menu-navigation/menu-navigation.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    var $menu = $('.menu-navigation__menu');
    var $navigation = $menu.find('.menu-navigation__menu__sidebar ul li');
    var $content = $menu.find('.menu-navigation__menu__content .content-container');
    $navigation.first().add($content.first()).addClass('is-active');
    
    $navigation.hover(
        function () {
            var index = $(this).index();
            $(this).addClass('is-active').siblings().removeClass('is-active');
            $content.eq(index).addClass('is-active').siblings().removeClass('is-active');
        }
    );
};


/***/ }),

/***/ "./src/molecules/product/product.js":
/*!******************************************!*\
  !*** ./src/molecules/product/product.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    var isMobile = window.innerWidth < 768;
    var $products = $('.products .product');
    if ($products.length > 0) {
        $products.each(function () {
            var $linkProduct = $(this).children().first();
            $(this).append($linkProduct.children());
            $linkProduct.text('Ver producto');
            $(this).append('<div class="product__actions grid-middle-center-noGutter"></div>');
            var $actions = $(this).find('.product__actions');
            var $addToCart = $(this).find('.add_to_cart_button');
            $linkProduct.add($addToCart).addClass('button');
            $actions.append($linkProduct).append($addToCart).append('<a href="#" class="button button--primary">Var carrito</a>');
        });
    }

    var $productSections = $('.related.products .products');
    if ($productSections.length > 0) {
        $productSections.each(function (index, section) {
            if ($(this).parent().hasClass('products-container')) {
                return false;
            }

            var $wrapper = $(this).parent();
            $wrapper.append('<div class="container-slider"></div>');
            var $slider = $wrapper.find('.container-slider');
            $slider.append('<div class="swiper-wrapper"></div>');
            var $products = $(this).find('.product');
            if ((isMobile && $products.length > 1) || (!isMobile && $products.length > 4)) {
                $slider.append('<div class="swiper-button-prev"><img src="'+theme_url+'/images/icons/chevron--white.svg"></div>');
                $slider.append('<div class="swiper-button-next"><img src="'+theme_url+'/images/icons/chevron--white.svg"></div>');   
                $slider.append('<div class="swiper-pagination"></div>');
            } else {
                $wrapper.css({
                    'margin-bottom': '0px',
                    'padding-bottom': '0px',
                });
            }
            
            $products.wrap('swiper-slide');
            $slider.find('.swiper-wrapper').append($products);
            $slider.find('ul.products').remove();

            var selector = '.nutripower .' + $wrapper.attr('class').split(' ').join('.');
            if (_.last(selector) === '.') {
                selector = selector.substr(0, selector.length - 1);
            }

            var configSlider = {
                slidesPerView: window.innerWidth < 768 ? 'auto' : 4,
                pagination: {
                    el: selector + ' .swiper-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
                navigation: {
                    nextEl: selector + ' .swiper-button-next',
                    prevEl: selector + ' .swiper-button-prev',
                },
            }

            var slider = new Swiper(selector  + ' .container-slider', configSlider);

            setTimeout(function () {
                $products.css('height', $wrapper.height());
            }, 500);
        });
    }
}

/***/ }),

/***/ "./src/organisms/header/header.js":
/*!****************************************!*\
  !*** ./src/organisms/header/header.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    const $header = $('.header');
    const $containerWoo = $header.find('.storefront-container');

    const $search = $header.find('.header__container__search');
    const $searchWoo = $containerWoo.find('.site-search').children();
    $search.append($searchWoo);

    const $actions = $header.find('.header__container__actions');
    const $cartWoo = $(
        `<li class="">
            <a class="cart-contents" href="/carrito" title="View your shopping cart">
                <span class="count">1</span><i class="material-icons">shopping_cart</i>
            </a>
        </li>
    `);
    $cartWoo.addClass('initialized');
    $actions.append($cartWoo);

    const $buttonToggleMenuMobile = $('.header__container__button-toggle');
    const $menuMobile = $('.header__navigation--mobile');
    $buttonToggleMenuMobile.on('click', function () {
        const $element = $(this).children();
        $element.toggleClass('is-active');
        $('#wrapper').toggleClass('is-shown-menu--mobile');
        $('body').toggleClass('no-scroll');

        if ($('#wpadminbar').length > 0) {
            if ($element.hasClass('is-active')) {
                $('#wpadminbar').css({
                    'top': '-46px'
                });
            } else {
                $('#wpadminbar').css({
                    'top': '0px'
                });                
            }
            
        }
    });
    $menuMobile.children().find('li').on('click', function () {
        const $element = $(this);
        $element.toggleClass('is-active');

        const $submenu = $element.children('ul'); 
        if ($submenu.length > 0) {
            $submenu.slideToggle('slow');
            $element.children('a').on('click', function (event) {
                event.preventDefault();
            })
        }
    });

    const $navigation = $('.header__navigation .menu-navigation');
    $navigation.find('.menu-navigation__container > li').addClass('menu-navigation__element col-shirnk_xs-12');
    const $buttonCategories = $('<li class="menu-navigation__element menu-navigation__element--icon col-shrink"></li>');
    $buttonCategories.append('<a href="#"></a>');
    $buttonCategories.children().append('<div class="hamburger hamburger--spring"><div class="hamburger-box"><div class="hamburger-inner"></div></div></div>');
    $buttonCategories.children().append('<span>Categorias</span>');
    $buttonCategories.insertBefore($navigation.find('.menu-navigation__container > li').first());

    const $actionMenuCategories = $('.header__navigation .menu-navigation .menu-navigation__element:first-child');
    const $menuCategories = $('.header__navigation .menu-navigation .menu-navigation__menu');
    $actionMenuCategories.on('click', function () {
        $menuCategories.toggleClass('is-shown');
        $('.site-content').add($('#main-nutripower')).toggleClass('is-overlay');
        $('body').toggleClass('no-scroll');
        $(this).find('.hamburger').toggleClass('is-active');
    });
};


/***/ }),

/***/ "./src/pages/homepage/homepage.js":
/*!****************************************!*\
  !*** ./src/pages/homepage/homepage.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    var isMobile = window.innerWidth < 768;
    var $homepage = $('.homepage');
    if ($homepage.length > 0) {    
        var $slider = $homepage.find('.homepage__slider');
        if ($slider.length > 0) {
            var sliderHomePage = new Swiper('.homepage__slider', {
                autoplay: {
                    delay: 2500,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.homepage__slider .swiper-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
            });

            window.slider = sliderHomePage;
        }

        var $onSaleProducts = $homepage.find('.on-sale-products');
        if ($onSaleProducts.length > 0) {
            var $products = $onSaleProducts.find('.product');
            $products.addClass('swiper-slide');
            $onSaleProducts.find('.woocommerce').append($products);
            
            var onSaleSlider = new Swiper('.on-sale-products .container-slider', {
                equalHeight: true,
                simulateTouch: false,
                slidesPerView: window.innerWidth >= 768 ? 4 : 'auto',
                navigation: {
                    nextEl: '.on-sale-products .swiper-button-next',
                    prevEl: '.on-sale-products .swiper-button-prev',
                },
                pagination: {
                    el: '.on-sale-products .swiper-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
            });

            if ((isMobile && $products.length <= 1) || (!isMobile && $products.length <= 4)) {
                $onSaleProducts.find('.swiper-button-prev, .swiper-button-next, .swiper-pagination').hide();
                $onSaleProducts.css('padding-bottom', '0px');
            }
        }

        var $featuredProducts = $homepage.find('.featured-products');
        if ($featuredProducts.length > 0) {
            var $products = $featuredProducts.find('.product');
            $products.addClass('swiper-slide');
            $featuredProducts.find('.woocommerce').append($products);
            
            var featuredSlider = new Swiper('.featured-products .container-slider', {
                equalHeight: true,
                simulateTouch: false,
                slidesPerView: window.innerWidth >= 768 ? 4 : 'auto',
                navigation: {
                    nextEl: '.featured-products .swiper-button-next',
                    prevEl: '.featured-products .swiper-button-prev',
                },
                pagination: {
                    el: '.featured-products .swiper-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
            });

            if ((isMobile && $products.length <= 1) || (!isMobile && $products.length <= 4)) {
                $featuredProducts.find('.swiper-button-prev, .swiper-button-next, .swiper-pagination').hide();
                $featuredProducts.css('padding-bottom', '0px');
            }
        }

        var productHorizontal = function ($products) {
            $products.each(function () {
                var $image = $(this).find('img');
                $image.wrap('<figure class="col-shrink"></figure>');
                var $content = $('<div class="content col-expand"></div>');
                $content.append($(this).find('.woocommerce-loop-product__title'));
                $content.append($(this).find('.star-rating'));
                $content.append($(this).find('.price'));
                $(this).addClass('grid').append($content);
            });
        }

        var $newProducts = $homepage.find('.new-products');
        if ($newProducts.length > 0) {
            var $products = $newProducts.find('.product');
            productHorizontal($products);
            $products.addClass('swiper-slide');
            $newProducts.find('.woocommerce').append($products);
            $newProducts.find('ul.products').remove();

            var newSlider = new Swiper('.new-products .container-slider', {
                simulateTouch: false,
                slidesPerView: window.innerWidth >= 768 ? 1 : 'auto',
                slidesPerColumn: window.innerWidth >= 768 ? 4 : 1,
                pagination: {
                    el: '.new-products .swiper-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
            });

            if ((isMobile && $products.length <= 1) || (!isMobile && $products.length <= 4)) {
                $newProducts.find('.swiper-pagination').hide();
                $newProducts.find('.container-slider').css('padding-bottom', '0px');
            }
        }
        var $bestSellingProducts = $homepage.find('.best-selling');
        if ($bestSellingProducts.length > 0) {
            var $products = $bestSellingProducts.find('.product');
            productHorizontal($products);
            $products.addClass('swiper-slide');
            $bestSellingProducts.find('.woocommerce').append($products);
            $bestSellingProducts.find('ul.products').remove();
            
            var bestSellingSlider = new Swiper('.best-selling .container-slider', {
                simulateTouch: false,
                slidesPerView: window.innerWidth >= 768 ? 1 : 'auto',
                slidesPerColumn: window.innerWidth >= 768 ? 4 : 1,
                navigation: {
                    nextEl: '.best-selling .swiper-button-next',
                    prevEl: '.best-selling .swiper-button-prev',
                },
                pagination: {
                    el: '.best-selling .swiper-pagination',
                    clickable: true,
                    dynamicBullets: true,
                },
            });

            if ((isMobile && $products.length <= 1) || (!isMobile && $products.length <= 4)) {
                $bestSellingProducts.find('.swiper-pagination').hide();
                $bestSellingProducts.find('.container-slider').css('padding-bottom', '0px');
            }
        }

        var $brands = $homepage.find('.brands');
        if ($brands.length > 0) {            
            var brandsSlider = new Swiper('.brands .container-slider', {
                simulateTouch: false,
                equalHeight: true,
                slidesPerView: window.innerWidth >= 768 ? 'auto' : 2,
                spaceBetween: 60,
                navigation: {
                    nextEl: '.brands .swiper-button-next',
                    prevEl: '.brands .swiper-button-prev',
                },
            });

            var $slides = $('.brands .container-slider .swiper-slide');
            if ((isMobile && $slides.length <= 1) || (!isMobile && $slides.length <= 4)) {
                $brands.find('.swiper-button-prev, .swiper-button-next').hide();
            }
        }
    }
}


/***/ }),

/***/ "./src/pages/page-content/page-content.js":
/*!************************************************!*\
  !*** ./src/pages/page-content/page-content.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    var $productPage = $('.page-content');
    if ($productPage.length > 0) {
        var $main = $('#main-nutripower');
        $main.append($productPage);
        $main.children(':not(.page-content):not(.woocommerce)').remove();

        var $checkoutButton = $('.checkout-button');
        if ($checkoutButton.length > 0) {
            $checkoutButton.addClass('button--primary');
            var $updateCartButton = $('.woocommerce-cart-form .shop_table tbody tr:last-child .button[name="update_cart"]');
            $updateCartButton.insertBefore($checkoutButton);
        }
    }
}

/***/ }),

/***/ "./src/pages/page-sorting/page-sorting.js":
/*!************************************************!*\
  !*** ./src/pages/page-sorting/page-sorting.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    if ($('#secondary .widget').length > 0 && $('.product-page').length === 0) {
        var $main = $('#main-nutripower');
        $main.addClass('page-sorting container');

        var $storeFrontContainer = $('#primary');
        var $storeFrontSidebar = $('#secondary');

        var $layout = $('<div class="grid"></div>');
        $layout.append('<aside class="page-sorting__sidebar col-shrink_xs-12"></aside>');
        $layout.append('<section class="page-sorting__container col-expand_xs-12"></section>');
        $layout.children('.page-sorting__sidebar').append($storeFrontSidebar.children());
        $storeFrontSidebar.remove();
        $storeFrontContainer.find('.products').addClass('products-container grid-3_xs-1');
        $storeFrontContainer.find('.product').addClass('col');
        
        $layout.children('.page-sorting__container').append($storeFrontContainer.children().children());
        $storeFrontContainer.remove();

        $main.append($layout);

        $storeFrontSidebar = $layout.find('.page-sorting__sidebar');
        $storeFrontSidebar.append('<div class="widget-element"></div>');
        $storeFrontSidebar.append('<div class="widget-element"></div>');
        var $widgets = $storeFrontSidebar.children(':not(.widget-element)');
        var $widgetContainers = $storeFrontSidebar.find('.widget-element');
        $widgetContainers.last().append('<span class="widget-title">Filtros</span>');
        $widgetContainers.last().append($widgets.first().siblings(':not(.widget-element)'));
        $widgetContainers.first().append('<span class="widget-title">Comprar por categor√≠a</span>');
        $widgetContainers.first().append($widgets.first());

        var $filtersBrand = $storeFrontSidebar.find('.pwb-filter-products ul li');
        $filtersBrand.each(function () {
            var $label = $(this).find('label');
            var $input = $(this).find('input');
            
            var customId = Math.random(0, 999);
            $label.attr('for', 'brand-' + customId);
            $input.attr('id', 'brand-' + customId);
            
            $input.insertBefore($label);

            $input.on('change', function () {
                $(this).parent().parent().next().trigger('click');
            })
        });

        var $filtersPrice = $storeFrontSidebar.find('.widget_price_filter');
        var $labelPrice = $filtersPrice.find('.price_label');
        setTimeout(function () {
            $labelPrice.insertBefore($filtersPrice.children().first());
        }, 500);

        var $filterSearch = $storeFrontSidebar.find('.widget_product_search');
        $filterSearch.insertAfter($filterSearch.parent());

        if ($('.pwb-brand-banner-cont').length > 0) {
            $('.woocommerce-products-header__title.page-title').hide();
        }
    }
}


/***/ }),

/***/ "./src/pages/product/product.js":
/*!**************************************!*\
  !*** ./src/pages/product/product.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function () {
    var $productPage = $('.product-page');
    if ($productPage.length > 0) {
        var $main = $('#main-nutripower');
        $main.append($productPage);
        $main.children(':not(.product-page):not(.woocommerce)').remove();

        var $gallery = $productPage.find('.woocommerce-product-gallery');
        if (window.innerWidth >= 768) {
            var $thumbs = $gallery.find('.woocommerce-product-gallery__image');
            var heightHighest = 0;
            
            $thumbs.each(function () {
                var $image = $(this).find('img');
                if ($image.height() > heightHighest) {
                    heightHighest = $image.height();
                }
            });

            $gallery.css({
                'height': heightHighest + 'px'
            });

            $thumbs.each(function () {
                var $image = $(this).find('img');

                if ($image.height() !== heightHighest) {
                    $(this).css({
                        'position': 'relative',
                        'top': (heightHighest - $image.height()) / 2 + 'px'
                    })
                }
            });
        }

        var $summary = $productPage.find('.summary');
        var $shareActions = $productPage.find('.storefront-product-sharing');
        $('<a><i class="material-icons">share</i></a>').insertBefore($shareActions.children());
        $('<a href="/index.php/cart" class="button view-cart">Ver carrito</a>').insertBefore($shareActions);
        var $viewCart = $productPage.find('.view-cart');
        var $cart = $summary.find('.cart');
        $('<div class="product-actions summary"></div>').insertAfter($summary);
        var $actions = $productPage.find('.product-actions');
        $actions.append($cart).append($viewCart).append($shareActions);

        // traductions
        var $stickyBarInfo = $('.storefront-sticky-add-to-cart');
        var $titleStickyBarInfo = $stickyBarInfo.find('.storefront-sticky-add-to-cart__content-title');
        var $nameProductStickyBarInfo = $titleStickyBarInfo.children();
        $titleStickyBarInfo.html('');
        $titleStickyBarInfo.text('Estas viendo: ');
        $titleStickyBarInfo.append('<span>' + $nameProductStickyBarInfo.text() + '</span>');
    }
}

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vbGVjdWxlcy9mb3Jtcy9mb3Jtcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9sZWN1bGVzL21lbnUtbmF2aWdhdGlvbi9tZW51LW5hdmlnYXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vbGVjdWxlcy9wcm9kdWN0L3Byb2R1Y3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL29yZ2FuaXNtcy9oZWFkZXIvaGVhZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9ob21lcGFnZS9ob21lcGFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFnZS1jb250ZW50L3BhZ2UtY29udGVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcGFnZS1zb3J0aW5nL3BhZ2Utc29ydGluZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvcHJvZHVjdC9wcm9kdWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL21haW4uanNcIik7XG4iLCIndXNlIHN0cmljdCdcblxuJCA9IGpRdWVyeTtcblxudmFyIGhlYWRlciA9IHJlcXVpcmUoJy4vb3JnYW5pc21zL2hlYWRlci9oZWFkZXInKSgpO1xuXG52YXIgcGFnZVNvcnRpbmcgPSByZXF1aXJlKCcuL3BhZ2VzL3BhZ2Utc29ydGluZy9wYWdlLXNvcnRpbmcnKSgpO1xuXG52YXIgbWVudU5hdmlnYXRpb24gPSByZXF1aXJlKCcuL21vbGVjdWxlcy9tZW51LW5hdmlnYXRpb24vbWVudS1uYXZpZ2F0aW9uJykoKTtcbnZhciBwcm9kdWN0ID0gcmVxdWlyZSgnLi9tb2xlY3VsZXMvcHJvZHVjdC9wcm9kdWN0JykoKTtcblxudmFyIGZvcm1zID0gcmVxdWlyZSgnLi9tb2xlY3VsZXMvZm9ybXMvZm9ybXMnKSgpO1xuXG52YXIgaG9tZXBhZ2UgPSByZXF1aXJlKCcuL3BhZ2VzL2hvbWVwYWdlL2hvbWVwYWdlJykoKTtcbnZhciBwcm9kdWN0UGFnZSA9IHJlcXVpcmUoJy4vcGFnZXMvcHJvZHVjdC9wcm9kdWN0JykoKTtcbnZhciBwYWdlQ29udGVudCA9IHJlcXVpcmUoJy4vcGFnZXMvcGFnZS1jb250ZW50L3BhZ2UtY29udGVudCcpKCk7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRpbnB1dE51bWJlciA9ICQoJy5udXRyaXBvd2VyIGlucHV0W3R5cGU9XCJudW1iZXJcIl06bm90KCNiaWxsaW5nX2RuaSknKTtcbiAgICBpZiAoJGlucHV0TnVtYmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJGlucHV0TnVtYmVyLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnPHNwYW4gY2xhc3M9XCJpbnB1dC1udW1iZXItaGFuZGxlciBpbnB1dC1udW1iZXItaGFuZGxlci0tYWRkXCI+Kzwvc3Bhbj4nKS5pbnNlcnRBZnRlcigkKHRoaXMpKTtcbiAgICAgICAgICAgICQoJzxzcGFuIGNsYXNzPVwiaW5wdXQtbnVtYmVyLWhhbmRsZXIgaW5wdXQtbnVtYmVyLWhhbmRsZXItLWxlc3NcIj4tPC9zcGFuPicpLmluc2VydEFmdGVyKCQodGhpcykpO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVySW5wdXQoJGlucHV0LCBhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndmFsdWUgJywgJGlucHV0LnZhbCgpKTtcbiAgICAgICAgICAgICAgICAkaW5wdXQuZm9jdXMoKTtcblxuICAgICAgICAgICAgICAgIGlmICgkaW5wdXQudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICRpbnB1dC52YWwoMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PT0gJ2FkZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LnZhbChOdW1iZXIoJGlucHV0LnZhbCgpKSArIDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICRpbnB1dC52YWwoTnVtYmVyKCRpbnB1dC52YWwoKSkgLSAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYWZ0ZXIgJywgJGlucHV0LnZhbCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyICRsZXNzID0gJCh0aGlzKS5zaWJsaW5ncygnc3BhbicpLmZpcnN0KCk7XG4gICAgICAgICAgICAkbGVzcy5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlcklucHV0ICgkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLCAnbGVzcycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgJGFkZCA9ICQodGhpcykuc2libGluZ3MoJ3NwYW4nKS5sYXN0KCk7XG4gICAgICAgICAgICAkYWRkLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVySW5wdXQgKCQodGhpcykuc2libGluZ3MoJ2lucHV0JyksICdhZGQnKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciAkc2VsZWN0cyA9ICQoJ3NlbGVjdCcpO1xuICAgICRzZWxlY3RzLndyYXAoJzxkaXYgY2xhc3M9XCJzZWxlY3Qtd3JhcHBlclwiPjwvZGl2PicpO1xuICAgIFxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgJGxhYmVsVGVybXNDb25kaXRpb25zQ2hlY2tvdXQgPSAkKCcud29vY29tbWVyY2UtdGVybXMtYW5kLWNvbmRpdGlvbnMtY2hlY2tib3gtdGV4dCcpLnBhcmVudCgpO1xuICAgICAgICBpZiAoJGxhYmVsVGVybXNDb25kaXRpb25zQ2hlY2tvdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyICRjaGVja2JveCA9ICRsYWJlbFRlcm1zQ29uZGl0aW9uc0NoZWNrb3V0LmNoaWxkcmVuKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICAgICAgICAgICRjaGVja2JveC5pbnNlcnRCZWZvcmUoJGxhYmVsVGVybXNDb25kaXRpb25zQ2hlY2tvdXQpO1xuICAgICAgICAgICAgJGxhYmVsVGVybXNDb25kaXRpb25zQ2hlY2tvdXQuYXR0cignZm9yJywgJGNoZWNrYm94LmF0dHIoJ2lkJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCRzZWxlY3RzLnBhcmVudCgpLmZpbmQoJy5zZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJHNlbGVjdHMucGFyZW50KCkuYWRkQ2xhc3MoJ25vLWFycm93Jyk7XG4gICAgICAgIH1cbiAgICB9LCAyNTAwKTtcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJG1lbnUgPSAkKCcubWVudS1uYXZpZ2F0aW9uX19tZW51Jyk7XG4gICAgdmFyICRuYXZpZ2F0aW9uID0gJG1lbnUuZmluZCgnLm1lbnUtbmF2aWdhdGlvbl9fbWVudV9fc2lkZWJhciB1bCBsaScpO1xuICAgIHZhciAkY29udGVudCA9ICRtZW51LmZpbmQoJy5tZW51LW5hdmlnYXRpb25fX21lbnVfX2NvbnRlbnQgLmNvbnRlbnQtY29udGFpbmVyJyk7XG4gICAgJG5hdmlnYXRpb24uZmlyc3QoKS5hZGQoJGNvbnRlbnQuZmlyc3QoKSkuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgIFxuICAgICRuYXZpZ2F0aW9uLmhvdmVyKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgICAgICRjb250ZW50LmVxKGluZGV4KS5hZGRDbGFzcygnaXMtYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICApO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpc01vYmlsZSA9IHdpbmRvdy5pbm5lcldpZHRoIDwgNzY4O1xuICAgIHZhciAkcHJvZHVjdHMgPSAkKCcucHJvZHVjdHMgLnByb2R1Y3QnKTtcbiAgICBpZiAoJHByb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgJHByb2R1Y3RzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyICRsaW5rUHJvZHVjdCA9ICQodGhpcykuY2hpbGRyZW4oKS5maXJzdCgpO1xuICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJGxpbmtQcm9kdWN0LmNoaWxkcmVuKCkpO1xuICAgICAgICAgICAgJGxpbmtQcm9kdWN0LnRleHQoJ1ZlciBwcm9kdWN0bycpO1xuICAgICAgICAgICAgJCh0aGlzKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJwcm9kdWN0X19hY3Rpb25zIGdyaWQtbWlkZGxlLWNlbnRlci1ub0d1dHRlclwiPjwvZGl2PicpO1xuICAgICAgICAgICAgdmFyICRhY3Rpb25zID0gJCh0aGlzKS5maW5kKCcucHJvZHVjdF9fYWN0aW9ucycpO1xuICAgICAgICAgICAgdmFyICRhZGRUb0NhcnQgPSAkKHRoaXMpLmZpbmQoJy5hZGRfdG9fY2FydF9idXR0b24nKTtcbiAgICAgICAgICAgICRsaW5rUHJvZHVjdC5hZGQoJGFkZFRvQ2FydCkuYWRkQ2xhc3MoJ2J1dHRvbicpO1xuICAgICAgICAgICAgJGFjdGlvbnMuYXBwZW5kKCRsaW5rUHJvZHVjdCkuYXBwZW5kKCRhZGRUb0NhcnQpLmFwcGVuZCgnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ1dHRvbiBidXR0b24tLXByaW1hcnlcIj5WYXIgY2Fycml0bzwvYT4nKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyICRwcm9kdWN0U2VjdGlvbnMgPSAkKCcucmVsYXRlZC5wcm9kdWN0cyAucHJvZHVjdHMnKTtcbiAgICBpZiAoJHByb2R1Y3RTZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICRwcm9kdWN0U2VjdGlvbnMuZWFjaChmdW5jdGlvbiAoaW5kZXgsIHNlY3Rpb24pIHtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnBhcmVudCgpLmhhc0NsYXNzKCdwcm9kdWN0cy1jb250YWluZXInKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyICR3cmFwcGVyID0gJCh0aGlzKS5wYXJlbnQoKTtcbiAgICAgICAgICAgICR3cmFwcGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cImNvbnRhaW5lci1zbGlkZXJcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgIHZhciAkc2xpZGVyID0gJHdyYXBwZXIuZmluZCgnLmNvbnRhaW5lci1zbGlkZXInKTtcbiAgICAgICAgICAgICRzbGlkZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic3dpcGVyLXdyYXBwZXJcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgIHZhciAkcHJvZHVjdHMgPSAkKHRoaXMpLmZpbmQoJy5wcm9kdWN0Jyk7XG4gICAgICAgICAgICBpZiAoKGlzTW9iaWxlICYmICRwcm9kdWN0cy5sZW5ndGggPiAxKSB8fCAoIWlzTW9iaWxlICYmICRwcm9kdWN0cy5sZW5ndGggPiA0KSkge1xuICAgICAgICAgICAgICAgICRzbGlkZXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwic3dpcGVyLWJ1dHRvbi1wcmV2XCI+PGltZyBzcmM9XCInK3RoZW1lX3VybCsnL2ltYWdlcy9pY29ucy9jaGV2cm9uLS13aGl0ZS5zdmdcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAkc2xpZGVyLmFwcGVuZCgnPGRpdiBjbGFzcz1cInN3aXBlci1idXR0b24tbmV4dFwiPjxpbWcgc3JjPVwiJyt0aGVtZV91cmwrJy9pbWFnZXMvaWNvbnMvY2hldnJvbi0td2hpdGUuc3ZnXCI+PC9kaXY+Jyk7ICAgXG4gICAgICAgICAgICAgICAgJHNsaWRlci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJzd2lwZXItcGFnaW5hdGlvblwiPjwvZGl2PicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkd3JhcHBlci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnbWFyZ2luLWJvdHRvbSc6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICAncGFkZGluZy1ib3R0b20nOiAnMHB4JyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJHByb2R1Y3RzLndyYXAoJ3N3aXBlci1zbGlkZScpO1xuICAgICAgICAgICAgJHNsaWRlci5maW5kKCcuc3dpcGVyLXdyYXBwZXInKS5hcHBlbmQoJHByb2R1Y3RzKTtcbiAgICAgICAgICAgICRzbGlkZXIuZmluZCgndWwucHJvZHVjdHMnKS5yZW1vdmUoKTtcblxuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJy5udXRyaXBvd2VyIC4nICsgJHdyYXBwZXIuYXR0cignY2xhc3MnKS5zcGxpdCgnICcpLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGlmIChfLmxhc3Qoc2VsZWN0b3IpID09PSAnLicpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvciA9IHNlbGVjdG9yLnN1YnN0cigwLCBzZWxlY3Rvci5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGNvbmZpZ1NsaWRlciA9IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiB3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCA/ICdhdXRvJyA6IDQsXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbDogc2VsZWN0b3IgKyAnIC5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHluYW1pY0J1bGxldHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRFbDogc2VsZWN0b3IgKyAnIC5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICAgICAgICAgICAgICBwcmV2RWw6IHNlbGVjdG9yICsgJyAuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2xpZGVyID0gbmV3IFN3aXBlcihzZWxlY3RvciAgKyAnIC5jb250YWluZXItc2xpZGVyJywgY29uZmlnU2xpZGVyKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHByb2R1Y3RzLmNzcygnaGVpZ2h0JywgJHdyYXBwZXIuaGVpZ2h0KCkpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0ICRoZWFkZXIgPSAkKCcuaGVhZGVyJyk7XG4gICAgY29uc3QgJGNvbnRhaW5lcldvbyA9ICRoZWFkZXIuZmluZCgnLnN0b3JlZnJvbnQtY29udGFpbmVyJyk7XG5cbiAgICBjb25zdCAkc2VhcmNoID0gJGhlYWRlci5maW5kKCcuaGVhZGVyX19jb250YWluZXJfX3NlYXJjaCcpO1xuICAgIGNvbnN0ICRzZWFyY2hXb28gPSAkY29udGFpbmVyV29vLmZpbmQoJy5zaXRlLXNlYXJjaCcpLmNoaWxkcmVuKCk7XG4gICAgJHNlYXJjaC5hcHBlbmQoJHNlYXJjaFdvbyk7XG5cbiAgICBjb25zdCAkYWN0aW9ucyA9ICRoZWFkZXIuZmluZCgnLmhlYWRlcl9fY29udGFpbmVyX19hY3Rpb25zJyk7XG4gICAgY29uc3QgJGNhcnRXb28gPSAkKFxuICAgICAgICBgPGxpIGNsYXNzPVwiXCI+XG4gICAgICAgICAgICA8YSBjbGFzcz1cImNhcnQtY29udGVudHNcIiBocmVmPVwiL2NhcnJpdG9cIiB0aXRsZT1cIlZpZXcgeW91ciBzaG9wcGluZyBjYXJ0XCI+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJjb3VudFwiPjE8L3NwYW4+PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPnNob3BwaW5nX2NhcnQ8L2k+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgIDwvbGk+XG4gICAgYCk7XG4gICAgJGNhcnRXb28uYWRkQ2xhc3MoJ2luaXRpYWxpemVkJyk7XG4gICAgJGFjdGlvbnMuYXBwZW5kKCRjYXJ0V29vKTtcblxuICAgIGNvbnN0ICRidXR0b25Ub2dnbGVNZW51TW9iaWxlID0gJCgnLmhlYWRlcl9fY29udGFpbmVyX19idXR0b24tdG9nZ2xlJyk7XG4gICAgY29uc3QgJG1lbnVNb2JpbGUgPSAkKCcuaGVhZGVyX19uYXZpZ2F0aW9uLS1tb2JpbGUnKTtcbiAgICAkYnV0dG9uVG9nZ2xlTWVudU1vYmlsZS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0ICRlbGVtZW50ID0gJCh0aGlzKS5jaGlsZHJlbigpO1xuICAgICAgICAkZWxlbWVudC50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgICQoJyN3cmFwcGVyJykudG9nZ2xlQ2xhc3MoJ2lzLXNob3duLW1lbnUtLW1vYmlsZScpO1xuICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ25vLXNjcm9sbCcpO1xuXG4gICAgICAgIGlmICgkKCcjd3BhZG1pbmJhcicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICgkZWxlbWVudC5oYXNDbGFzcygnaXMtYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICAkKCcjd3BhZG1pbmJhcicpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICd0b3AnOiAnLTQ2cHgnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoJyN3cGFkbWluYmFyJykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6ICcwcHgnXG4gICAgICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAkbWVudU1vYmlsZS5jaGlsZHJlbigpLmZpbmQoJ2xpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCAkZWxlbWVudCA9ICQodGhpcyk7XG4gICAgICAgICRlbGVtZW50LnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcblxuICAgICAgICBjb25zdCAkc3VibWVudSA9ICRlbGVtZW50LmNoaWxkcmVuKCd1bCcpOyBcbiAgICAgICAgaWYgKCRzdWJtZW51Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRzdWJtZW51LnNsaWRlVG9nZ2xlKCdzbG93Jyk7XG4gICAgICAgICAgICAkZWxlbWVudC5jaGlsZHJlbignYScpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCAkbmF2aWdhdGlvbiA9ICQoJy5oZWFkZXJfX25hdmlnYXRpb24gLm1lbnUtbmF2aWdhdGlvbicpO1xuICAgICRuYXZpZ2F0aW9uLmZpbmQoJy5tZW51LW5hdmlnYXRpb25fX2NvbnRhaW5lciA+IGxpJykuYWRkQ2xhc3MoJ21lbnUtbmF2aWdhdGlvbl9fZWxlbWVudCBjb2wtc2hpcm5rX3hzLTEyJyk7XG4gICAgY29uc3QgJGJ1dHRvbkNhdGVnb3JpZXMgPSAkKCc8bGkgY2xhc3M9XCJtZW51LW5hdmlnYXRpb25fX2VsZW1lbnQgbWVudS1uYXZpZ2F0aW9uX19lbGVtZW50LS1pY29uIGNvbC1zaHJpbmtcIj48L2xpPicpO1xuICAgICRidXR0b25DYXRlZ29yaWVzLmFwcGVuZCgnPGEgaHJlZj1cIiNcIj48L2E+Jyk7XG4gICAgJGJ1dHRvbkNhdGVnb3JpZXMuY2hpbGRyZW4oKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJoYW1idXJnZXIgaGFtYnVyZ2VyLS1zcHJpbmdcIj48ZGl2IGNsYXNzPVwiaGFtYnVyZ2VyLWJveFwiPjxkaXYgY2xhc3M9XCJoYW1idXJnZXItaW5uZXJcIj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbiAgICAkYnV0dG9uQ2F0ZWdvcmllcy5jaGlsZHJlbigpLmFwcGVuZCgnPHNwYW4+Q2F0ZWdvcmlhczwvc3Bhbj4nKTtcbiAgICAkYnV0dG9uQ2F0ZWdvcmllcy5pbnNlcnRCZWZvcmUoJG5hdmlnYXRpb24uZmluZCgnLm1lbnUtbmF2aWdhdGlvbl9fY29udGFpbmVyID4gbGknKS5maXJzdCgpKTtcblxuICAgIGNvbnN0ICRhY3Rpb25NZW51Q2F0ZWdvcmllcyA9ICQoJy5oZWFkZXJfX25hdmlnYXRpb24gLm1lbnUtbmF2aWdhdGlvbiAubWVudS1uYXZpZ2F0aW9uX19lbGVtZW50OmZpcnN0LWNoaWxkJyk7XG4gICAgY29uc3QgJG1lbnVDYXRlZ29yaWVzID0gJCgnLmhlYWRlcl9fbmF2aWdhdGlvbiAubWVudS1uYXZpZ2F0aW9uIC5tZW51LW5hdmlnYXRpb25fX21lbnUnKTtcbiAgICAkYWN0aW9uTWVudUNhdGVnb3JpZXMub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkbWVudUNhdGVnb3JpZXMudG9nZ2xlQ2xhc3MoJ2lzLXNob3duJyk7XG4gICAgICAgICQoJy5zaXRlLWNvbnRlbnQnKS5hZGQoJCgnI21haW4tbnV0cmlwb3dlcicpKS50b2dnbGVDbGFzcygnaXMtb3ZlcmxheScpO1xuICAgICAgICAkKCdib2R5JykudG9nZ2xlQ2xhc3MoJ25vLXNjcm9sbCcpO1xuICAgICAgICAkKHRoaXMpLmZpbmQoJy5oYW1idXJnZXInKS50b2dnbGVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgfSk7XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGlzTW9iaWxlID0gd2luZG93LmlubmVyV2lkdGggPCA3Njg7XG4gICAgdmFyICRob21lcGFnZSA9ICQoJy5ob21lcGFnZScpO1xuICAgIGlmICgkaG9tZXBhZ2UubGVuZ3RoID4gMCkgeyAgICBcbiAgICAgICAgdmFyICRzbGlkZXIgPSAkaG9tZXBhZ2UuZmluZCgnLmhvbWVwYWdlX19zbGlkZXInKTtcbiAgICAgICAgaWYgKCRzbGlkZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIHNsaWRlckhvbWVQYWdlID0gbmV3IFN3aXBlcignLmhvbWVwYWdlX19zbGlkZXInLCB7XG4gICAgICAgICAgICAgICAgYXV0b3BsYXk6IHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDI1MDAsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZWw6ICcuaG9tZXBhZ2VfX3NsaWRlciAuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGR5bmFtaWNCdWxsZXRzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgd2luZG93LnNsaWRlciA9IHNsaWRlckhvbWVQYWdlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyICRvblNhbGVQcm9kdWN0cyA9ICRob21lcGFnZS5maW5kKCcub24tc2FsZS1wcm9kdWN0cycpO1xuICAgICAgICBpZiAoJG9uU2FsZVByb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciAkcHJvZHVjdHMgPSAkb25TYWxlUHJvZHVjdHMuZmluZCgnLnByb2R1Y3QnKTtcbiAgICAgICAgICAgICRwcm9kdWN0cy5hZGRDbGFzcygnc3dpcGVyLXNsaWRlJyk7XG4gICAgICAgICAgICAkb25TYWxlUHJvZHVjdHMuZmluZCgnLndvb2NvbW1lcmNlJykuYXBwZW5kKCRwcm9kdWN0cyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBvblNhbGVTbGlkZXIgPSBuZXcgU3dpcGVyKCcub24tc2FsZS1wcm9kdWN0cyAuY29udGFpbmVyLXNsaWRlcicsIHtcbiAgICAgICAgICAgICAgICBlcXVhbEhlaWdodDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzaW11bGF0ZVRvdWNoOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiB3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjggPyA0IDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAnLm9uLXNhbGUtcHJvZHVjdHMgLnN3aXBlci1idXR0b24tbmV4dCcsXG4gICAgICAgICAgICAgICAgICAgIHByZXZFbDogJy5vbi1zYWxlLXByb2R1Y3RzIC5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbDogJy5vbi1zYWxlLXByb2R1Y3RzIC5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHluYW1pY0J1bGxldHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoKGlzTW9iaWxlICYmICRwcm9kdWN0cy5sZW5ndGggPD0gMSkgfHwgKCFpc01vYmlsZSAmJiAkcHJvZHVjdHMubGVuZ3RoIDw9IDQpKSB7XG4gICAgICAgICAgICAgICAgJG9uU2FsZVByb2R1Y3RzLmZpbmQoJy5zd2lwZXItYnV0dG9uLXByZXYsIC5zd2lwZXItYnV0dG9uLW5leHQsIC5zd2lwZXItcGFnaW5hdGlvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkb25TYWxlUHJvZHVjdHMuY3NzKCdwYWRkaW5nLWJvdHRvbScsICcwcHgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkZmVhdHVyZWRQcm9kdWN0cyA9ICRob21lcGFnZS5maW5kKCcuZmVhdHVyZWQtcHJvZHVjdHMnKTtcbiAgICAgICAgaWYgKCRmZWF0dXJlZFByb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciAkcHJvZHVjdHMgPSAkZmVhdHVyZWRQcm9kdWN0cy5maW5kKCcucHJvZHVjdCcpO1xuICAgICAgICAgICAgJHByb2R1Y3RzLmFkZENsYXNzKCdzd2lwZXItc2xpZGUnKTtcbiAgICAgICAgICAgICRmZWF0dXJlZFByb2R1Y3RzLmZpbmQoJy53b29jb21tZXJjZScpLmFwcGVuZCgkcHJvZHVjdHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZmVhdHVyZWRTbGlkZXIgPSBuZXcgU3dpcGVyKCcuZmVhdHVyZWQtcHJvZHVjdHMgLmNvbnRhaW5lci1zbGlkZXInLCB7XG4gICAgICAgICAgICAgICAgZXF1YWxIZWlnaHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2ltdWxhdGVUb3VjaDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogd2luZG93LmlubmVyV2lkdGggPj0gNzY4ID8gNCA6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRFbDogJy5mZWF0dXJlZC1wcm9kdWN0cyAuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgcHJldkVsOiAnLmZlYXR1cmVkLXByb2R1Y3RzIC5zd2lwZXItYnV0dG9uLXByZXYnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbDogJy5mZWF0dXJlZC1wcm9kdWN0cyAuc3dpcGVyLXBhZ2luYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICBjbGlja2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGR5bmFtaWNCdWxsZXRzOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKChpc01vYmlsZSAmJiAkcHJvZHVjdHMubGVuZ3RoIDw9IDEpIHx8ICghaXNNb2JpbGUgJiYgJHByb2R1Y3RzLmxlbmd0aCA8PSA0KSkge1xuICAgICAgICAgICAgICAgICRmZWF0dXJlZFByb2R1Y3RzLmZpbmQoJy5zd2lwZXItYnV0dG9uLXByZXYsIC5zd2lwZXItYnV0dG9uLW5leHQsIC5zd2lwZXItcGFnaW5hdGlvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkZmVhdHVyZWRQcm9kdWN0cy5jc3MoJ3BhZGRpbmctYm90dG9tJywgJzBweCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHByb2R1Y3RIb3Jpem9udGFsID0gZnVuY3Rpb24gKCRwcm9kdWN0cykge1xuICAgICAgICAgICAgJHByb2R1Y3RzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkaW1hZ2UgPSAkKHRoaXMpLmZpbmQoJ2ltZycpO1xuICAgICAgICAgICAgICAgICRpbWFnZS53cmFwKCc8ZmlndXJlIGNsYXNzPVwiY29sLXNocmlua1wiPjwvZmlndXJlPicpO1xuICAgICAgICAgICAgICAgIHZhciAkY29udGVudCA9ICQoJzxkaXYgY2xhc3M9XCJjb250ZW50IGNvbC1leHBhbmRcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgICAgICAkY29udGVudC5hcHBlbmQoJCh0aGlzKS5maW5kKCcud29vY29tbWVyY2UtbG9vcC1wcm9kdWN0X190aXRsZScpKTtcbiAgICAgICAgICAgICAgICAkY29udGVudC5hcHBlbmQoJCh0aGlzKS5maW5kKCcuc3Rhci1yYXRpbmcnKSk7XG4gICAgICAgICAgICAgICAgJGNvbnRlbnQuYXBwZW5kKCQodGhpcykuZmluZCgnLnByaWNlJykpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2dyaWQnKS5hcHBlbmQoJGNvbnRlbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJG5ld1Byb2R1Y3RzID0gJGhvbWVwYWdlLmZpbmQoJy5uZXctcHJvZHVjdHMnKTtcbiAgICAgICAgaWYgKCRuZXdQcm9kdWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgJHByb2R1Y3RzID0gJG5ld1Byb2R1Y3RzLmZpbmQoJy5wcm9kdWN0Jyk7XG4gICAgICAgICAgICBwcm9kdWN0SG9yaXpvbnRhbCgkcHJvZHVjdHMpO1xuICAgICAgICAgICAgJHByb2R1Y3RzLmFkZENsYXNzKCdzd2lwZXItc2xpZGUnKTtcbiAgICAgICAgICAgICRuZXdQcm9kdWN0cy5maW5kKCcud29vY29tbWVyY2UnKS5hcHBlbmQoJHByb2R1Y3RzKTtcbiAgICAgICAgICAgICRuZXdQcm9kdWN0cy5maW5kKCd1bC5wcm9kdWN0cycpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICB2YXIgbmV3U2xpZGVyID0gbmV3IFN3aXBlcignLm5ldy1wcm9kdWN0cyAuY29udGFpbmVyLXNsaWRlcicsIHtcbiAgICAgICAgICAgICAgICBzaW11bGF0ZVRvdWNoOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiB3aW5kb3cuaW5uZXJXaWR0aCA+PSA3NjggPyAxIDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgIHNsaWRlc1BlckNvbHVtbjogd2luZG93LmlubmVyV2lkdGggPj0gNzY4ID8gNCA6IDEsXG4gICAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbDogJy5uZXctcHJvZHVjdHMgLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBkeW5hbWljQnVsbGV0czogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICgoaXNNb2JpbGUgJiYgJHByb2R1Y3RzLmxlbmd0aCA8PSAxKSB8fCAoIWlzTW9iaWxlICYmICRwcm9kdWN0cy5sZW5ndGggPD0gNCkpIHtcbiAgICAgICAgICAgICAgICAkbmV3UHJvZHVjdHMuZmluZCgnLnN3aXBlci1wYWdpbmF0aW9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICRuZXdQcm9kdWN0cy5maW5kKCcuY29udGFpbmVyLXNsaWRlcicpLmNzcygncGFkZGluZy1ib3R0b20nLCAnMHB4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyICRiZXN0U2VsbGluZ1Byb2R1Y3RzID0gJGhvbWVwYWdlLmZpbmQoJy5iZXN0LXNlbGxpbmcnKTtcbiAgICAgICAgaWYgKCRiZXN0U2VsbGluZ1Byb2R1Y3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciAkcHJvZHVjdHMgPSAkYmVzdFNlbGxpbmdQcm9kdWN0cy5maW5kKCcucHJvZHVjdCcpO1xuICAgICAgICAgICAgcHJvZHVjdEhvcml6b250YWwoJHByb2R1Y3RzKTtcbiAgICAgICAgICAgICRwcm9kdWN0cy5hZGRDbGFzcygnc3dpcGVyLXNsaWRlJyk7XG4gICAgICAgICAgICAkYmVzdFNlbGxpbmdQcm9kdWN0cy5maW5kKCcud29vY29tbWVyY2UnKS5hcHBlbmQoJHByb2R1Y3RzKTtcbiAgICAgICAgICAgICRiZXN0U2VsbGluZ1Byb2R1Y3RzLmZpbmQoJ3VsLnByb2R1Y3RzJykucmVtb3ZlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBiZXN0U2VsbGluZ1NsaWRlciA9IG5ldyBTd2lwZXIoJy5iZXN0LXNlbGxpbmcgLmNvbnRhaW5lci1zbGlkZXInLCB7XG4gICAgICAgICAgICAgICAgc2ltdWxhdGVUb3VjaDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogd2luZG93LmlubmVyV2lkdGggPj0gNzY4ID8gMSA6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJDb2x1bW46IHdpbmRvdy5pbm5lcldpZHRoID49IDc2OCA/IDQgOiAxLFxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAnLmJlc3Qtc2VsbGluZyAuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgcHJldkVsOiAnLmJlc3Qtc2VsbGluZyAuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZWw6ICcuYmVzdC1zZWxsaW5nIC5zd2lwZXItcGFnaW5hdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZHluYW1pY0J1bGxldHM6IHRydWUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoKGlzTW9iaWxlICYmICRwcm9kdWN0cy5sZW5ndGggPD0gMSkgfHwgKCFpc01vYmlsZSAmJiAkcHJvZHVjdHMubGVuZ3RoIDw9IDQpKSB7XG4gICAgICAgICAgICAgICAgJGJlc3RTZWxsaW5nUHJvZHVjdHMuZmluZCgnLnN3aXBlci1wYWdpbmF0aW9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICRiZXN0U2VsbGluZ1Byb2R1Y3RzLmZpbmQoJy5jb250YWluZXItc2xpZGVyJykuY3NzKCdwYWRkaW5nLWJvdHRvbScsICcwcHgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkYnJhbmRzID0gJGhvbWVwYWdlLmZpbmQoJy5icmFuZHMnKTtcbiAgICAgICAgaWYgKCRicmFuZHMubGVuZ3RoID4gMCkgeyAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGJyYW5kc1NsaWRlciA9IG5ldyBTd2lwZXIoJy5icmFuZHMgLmNvbnRhaW5lci1zbGlkZXInLCB7XG4gICAgICAgICAgICAgICAgc2ltdWxhdGVUb3VjaDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZXF1YWxIZWlnaHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogd2luZG93LmlubmVyV2lkdGggPj0gNzY4ID8gJ2F1dG8nIDogMixcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDYwLFxuICAgICAgICAgICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dEVsOiAnLmJyYW5kcyAuc3dpcGVyLWJ1dHRvbi1uZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgcHJldkVsOiAnLmJyYW5kcyAuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhciAkc2xpZGVzID0gJCgnLmJyYW5kcyAuY29udGFpbmVyLXNsaWRlciAuc3dpcGVyLXNsaWRlJyk7XG4gICAgICAgICAgICBpZiAoKGlzTW9iaWxlICYmICRzbGlkZXMubGVuZ3RoIDw9IDEpIHx8ICghaXNNb2JpbGUgJiYgJHNsaWRlcy5sZW5ndGggPD0gNCkpIHtcbiAgICAgICAgICAgICAgICAkYnJhbmRzLmZpbmQoJy5zd2lwZXItYnV0dG9uLXByZXYsIC5zd2lwZXItYnV0dG9uLW5leHQnKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgJHByb2R1Y3RQYWdlID0gJCgnLnBhZ2UtY29udGVudCcpO1xuICAgIGlmICgkcHJvZHVjdFBhZ2UubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgJG1haW4gPSAkKCcjbWFpbi1udXRyaXBvd2VyJyk7XG4gICAgICAgICRtYWluLmFwcGVuZCgkcHJvZHVjdFBhZ2UpO1xuICAgICAgICAkbWFpbi5jaGlsZHJlbignOm5vdCgucGFnZS1jb250ZW50KTpub3QoLndvb2NvbW1lcmNlKScpLnJlbW92ZSgpO1xuXG4gICAgICAgIHZhciAkY2hlY2tvdXRCdXR0b24gPSAkKCcuY2hlY2tvdXQtYnV0dG9uJyk7XG4gICAgICAgIGlmICgkY2hlY2tvdXRCdXR0b24ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJGNoZWNrb3V0QnV0dG9uLmFkZENsYXNzKCdidXR0b24tLXByaW1hcnknKTtcbiAgICAgICAgICAgIHZhciAkdXBkYXRlQ2FydEJ1dHRvbiA9ICQoJy53b29jb21tZXJjZS1jYXJ0LWZvcm0gLnNob3BfdGFibGUgdGJvZHkgdHI6bGFzdC1jaGlsZCAuYnV0dG9uW25hbWU9XCJ1cGRhdGVfY2FydFwiXScpO1xuICAgICAgICAgICAgJHVwZGF0ZUNhcnRCdXR0b24uaW5zZXJ0QmVmb3JlKCRjaGVja291dEJ1dHRvbik7XG4gICAgICAgIH1cbiAgICB9XG59IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQoJyNzZWNvbmRhcnkgLndpZGdldCcpLmxlbmd0aCA+IDAgJiYgJCgnLnByb2R1Y3QtcGFnZScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB2YXIgJG1haW4gPSAkKCcjbWFpbi1udXRyaXBvd2VyJyk7XG4gICAgICAgICRtYWluLmFkZENsYXNzKCdwYWdlLXNvcnRpbmcgY29udGFpbmVyJyk7XG5cbiAgICAgICAgdmFyICRzdG9yZUZyb250Q29udGFpbmVyID0gJCgnI3ByaW1hcnknKTtcbiAgICAgICAgdmFyICRzdG9yZUZyb250U2lkZWJhciA9ICQoJyNzZWNvbmRhcnknKTtcblxuICAgICAgICB2YXIgJGxheW91dCA9ICQoJzxkaXYgY2xhc3M9XCJncmlkXCI+PC9kaXY+Jyk7XG4gICAgICAgICRsYXlvdXQuYXBwZW5kKCc8YXNpZGUgY2xhc3M9XCJwYWdlLXNvcnRpbmdfX3NpZGViYXIgY29sLXNocmlua194cy0xMlwiPjwvYXNpZGU+Jyk7XG4gICAgICAgICRsYXlvdXQuYXBwZW5kKCc8c2VjdGlvbiBjbGFzcz1cInBhZ2Utc29ydGluZ19fY29udGFpbmVyIGNvbC1leHBhbmRfeHMtMTJcIj48L3NlY3Rpb24+Jyk7XG4gICAgICAgICRsYXlvdXQuY2hpbGRyZW4oJy5wYWdlLXNvcnRpbmdfX3NpZGViYXInKS5hcHBlbmQoJHN0b3JlRnJvbnRTaWRlYmFyLmNoaWxkcmVuKCkpO1xuICAgICAgICAkc3RvcmVGcm9udFNpZGViYXIucmVtb3ZlKCk7XG4gICAgICAgICRzdG9yZUZyb250Q29udGFpbmVyLmZpbmQoJy5wcm9kdWN0cycpLmFkZENsYXNzKCdwcm9kdWN0cy1jb250YWluZXIgZ3JpZC0zX3hzLTEnKTtcbiAgICAgICAgJHN0b3JlRnJvbnRDb250YWluZXIuZmluZCgnLnByb2R1Y3QnKS5hZGRDbGFzcygnY29sJyk7XG4gICAgICAgIFxuICAgICAgICAkbGF5b3V0LmNoaWxkcmVuKCcucGFnZS1zb3J0aW5nX19jb250YWluZXInKS5hcHBlbmQoJHN0b3JlRnJvbnRDb250YWluZXIuY2hpbGRyZW4oKS5jaGlsZHJlbigpKTtcbiAgICAgICAgJHN0b3JlRnJvbnRDb250YWluZXIucmVtb3ZlKCk7XG5cbiAgICAgICAgJG1haW4uYXBwZW5kKCRsYXlvdXQpO1xuXG4gICAgICAgICRzdG9yZUZyb250U2lkZWJhciA9ICRsYXlvdXQuZmluZCgnLnBhZ2Utc29ydGluZ19fc2lkZWJhcicpO1xuICAgICAgICAkc3RvcmVGcm9udFNpZGViYXIuYXBwZW5kKCc8ZGl2IGNsYXNzPVwid2lkZ2V0LWVsZW1lbnRcIj48L2Rpdj4nKTtcbiAgICAgICAgJHN0b3JlRnJvbnRTaWRlYmFyLmFwcGVuZCgnPGRpdiBjbGFzcz1cIndpZGdldC1lbGVtZW50XCI+PC9kaXY+Jyk7XG4gICAgICAgIHZhciAkd2lkZ2V0cyA9ICRzdG9yZUZyb250U2lkZWJhci5jaGlsZHJlbignOm5vdCgud2lkZ2V0LWVsZW1lbnQpJyk7XG4gICAgICAgIHZhciAkd2lkZ2V0Q29udGFpbmVycyA9ICRzdG9yZUZyb250U2lkZWJhci5maW5kKCcud2lkZ2V0LWVsZW1lbnQnKTtcbiAgICAgICAgJHdpZGdldENvbnRhaW5lcnMubGFzdCgpLmFwcGVuZCgnPHNwYW4gY2xhc3M9XCJ3aWRnZXQtdGl0bGVcIj5GaWx0cm9zPC9zcGFuPicpO1xuICAgICAgICAkd2lkZ2V0Q29udGFpbmVycy5sYXN0KCkuYXBwZW5kKCR3aWRnZXRzLmZpcnN0KCkuc2libGluZ3MoJzpub3QoLndpZGdldC1lbGVtZW50KScpKTtcbiAgICAgICAgJHdpZGdldENvbnRhaW5lcnMuZmlyc3QoKS5hcHBlbmQoJzxzcGFuIGNsYXNzPVwid2lkZ2V0LXRpdGxlXCI+Q29tcHJhciBwb3IgY2F0ZWdvcsOtYTwvc3Bhbj4nKTtcbiAgICAgICAgJHdpZGdldENvbnRhaW5lcnMuZmlyc3QoKS5hcHBlbmQoJHdpZGdldHMuZmlyc3QoKSk7XG5cbiAgICAgICAgdmFyICRmaWx0ZXJzQnJhbmQgPSAkc3RvcmVGcm9udFNpZGViYXIuZmluZCgnLnB3Yi1maWx0ZXItcHJvZHVjdHMgdWwgbGknKTtcbiAgICAgICAgJGZpbHRlcnNCcmFuZC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciAkbGFiZWwgPSAkKHRoaXMpLmZpbmQoJ2xhYmVsJyk7XG4gICAgICAgICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKS5maW5kKCdpbnB1dCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgY3VzdG9tSWQgPSBNYXRoLnJhbmRvbSgwLCA5OTkpO1xuICAgICAgICAgICAgJGxhYmVsLmF0dHIoJ2ZvcicsICdicmFuZC0nICsgY3VzdG9tSWQpO1xuICAgICAgICAgICAgJGlucHV0LmF0dHIoJ2lkJywgJ2JyYW5kLScgKyBjdXN0b21JZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRpbnB1dC5pbnNlcnRCZWZvcmUoJGxhYmVsKTtcblxuICAgICAgICAgICAgJGlucHV0Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5uZXh0KCkudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciAkZmlsdGVyc1ByaWNlID0gJHN0b3JlRnJvbnRTaWRlYmFyLmZpbmQoJy53aWRnZXRfcHJpY2VfZmlsdGVyJyk7XG4gICAgICAgIHZhciAkbGFiZWxQcmljZSA9ICRmaWx0ZXJzUHJpY2UuZmluZCgnLnByaWNlX2xhYmVsJyk7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGxhYmVsUHJpY2UuaW5zZXJ0QmVmb3JlKCRmaWx0ZXJzUHJpY2UuY2hpbGRyZW4oKS5maXJzdCgpKTtcbiAgICAgICAgfSwgNTAwKTtcblxuICAgICAgICB2YXIgJGZpbHRlclNlYXJjaCA9ICRzdG9yZUZyb250U2lkZWJhci5maW5kKCcud2lkZ2V0X3Byb2R1Y3Rfc2VhcmNoJyk7XG4gICAgICAgICRmaWx0ZXJTZWFyY2guaW5zZXJ0QWZ0ZXIoJGZpbHRlclNlYXJjaC5wYXJlbnQoKSk7XG5cbiAgICAgICAgaWYgKCQoJy5wd2ItYnJhbmQtYmFubmVyLWNvbnQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAkKCcud29vY29tbWVyY2UtcHJvZHVjdHMtaGVhZGVyX190aXRsZS5wYWdlLXRpdGxlJykuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyICRwcm9kdWN0UGFnZSA9ICQoJy5wcm9kdWN0LXBhZ2UnKTtcbiAgICBpZiAoJHByb2R1Y3RQYWdlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyICRtYWluID0gJCgnI21haW4tbnV0cmlwb3dlcicpO1xuICAgICAgICAkbWFpbi5hcHBlbmQoJHByb2R1Y3RQYWdlKTtcbiAgICAgICAgJG1haW4uY2hpbGRyZW4oJzpub3QoLnByb2R1Y3QtcGFnZSk6bm90KC53b29jb21tZXJjZSknKS5yZW1vdmUoKTtcblxuICAgICAgICB2YXIgJGdhbGxlcnkgPSAkcHJvZHVjdFBhZ2UuZmluZCgnLndvb2NvbW1lcmNlLXByb2R1Y3QtZ2FsbGVyeScpO1xuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPj0gNzY4KSB7XG4gICAgICAgICAgICB2YXIgJHRodW1icyA9ICRnYWxsZXJ5LmZpbmQoJy53b29jb21tZXJjZS1wcm9kdWN0LWdhbGxlcnlfX2ltYWdlJyk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0SGlnaGVzdCA9IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICR0aHVtYnMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRpbWFnZSA9ICQodGhpcykuZmluZCgnaW1nJyk7XG4gICAgICAgICAgICAgICAgaWYgKCRpbWFnZS5oZWlnaHQoKSA+IGhlaWdodEhpZ2hlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0SGlnaGVzdCA9ICRpbWFnZS5oZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJGdhbGxlcnkuY3NzKHtcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogaGVpZ2h0SGlnaGVzdCArICdweCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkdGh1bWJzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciAkaW1hZ2UgPSAkKHRoaXMpLmZpbmQoJ2ltZycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRpbWFnZS5oZWlnaHQoKSAhPT0gaGVpZ2h0SGlnaGVzdCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAncG9zaXRpb24nOiAncmVsYXRpdmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IChoZWlnaHRIaWdoZXN0IC0gJGltYWdlLmhlaWdodCgpKSAvIDIgKyAncHgnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJHN1bW1hcnkgPSAkcHJvZHVjdFBhZ2UuZmluZCgnLnN1bW1hcnknKTtcbiAgICAgICAgdmFyICRzaGFyZUFjdGlvbnMgPSAkcHJvZHVjdFBhZ2UuZmluZCgnLnN0b3JlZnJvbnQtcHJvZHVjdC1zaGFyaW5nJyk7XG4gICAgICAgICQoJzxhPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5zaGFyZTwvaT48L2E+JykuaW5zZXJ0QmVmb3JlKCRzaGFyZUFjdGlvbnMuY2hpbGRyZW4oKSk7XG4gICAgICAgICQoJzxhIGhyZWY9XCIvaW5kZXgucGhwL2NhcnRcIiBjbGFzcz1cImJ1dHRvbiB2aWV3LWNhcnRcIj5WZXIgY2Fycml0bzwvYT4nKS5pbnNlcnRCZWZvcmUoJHNoYXJlQWN0aW9ucyk7XG4gICAgICAgIHZhciAkdmlld0NhcnQgPSAkcHJvZHVjdFBhZ2UuZmluZCgnLnZpZXctY2FydCcpO1xuICAgICAgICB2YXIgJGNhcnQgPSAkc3VtbWFyeS5maW5kKCcuY2FydCcpO1xuICAgICAgICAkKCc8ZGl2IGNsYXNzPVwicHJvZHVjdC1hY3Rpb25zIHN1bW1hcnlcIj48L2Rpdj4nKS5pbnNlcnRBZnRlcigkc3VtbWFyeSk7XG4gICAgICAgIHZhciAkYWN0aW9ucyA9ICRwcm9kdWN0UGFnZS5maW5kKCcucHJvZHVjdC1hY3Rpb25zJyk7XG4gICAgICAgICRhY3Rpb25zLmFwcGVuZCgkY2FydCkuYXBwZW5kKCR2aWV3Q2FydCkuYXBwZW5kKCRzaGFyZUFjdGlvbnMpO1xuXG4gICAgICAgIC8vIHRyYWR1Y3Rpb25zXG4gICAgICAgIHZhciAkc3RpY2t5QmFySW5mbyA9ICQoJy5zdG9yZWZyb250LXN0aWNreS1hZGQtdG8tY2FydCcpO1xuICAgICAgICB2YXIgJHRpdGxlU3RpY2t5QmFySW5mbyA9ICRzdGlja3lCYXJJbmZvLmZpbmQoJy5zdG9yZWZyb250LXN0aWNreS1hZGQtdG8tY2FydF9fY29udGVudC10aXRsZScpO1xuICAgICAgICB2YXIgJG5hbWVQcm9kdWN0U3RpY2t5QmFySW5mbyA9ICR0aXRsZVN0aWNreUJhckluZm8uY2hpbGRyZW4oKTtcbiAgICAgICAgJHRpdGxlU3RpY2t5QmFySW5mby5odG1sKCcnKTtcbiAgICAgICAgJHRpdGxlU3RpY2t5QmFySW5mby50ZXh0KCdFc3RhcyB2aWVuZG86ICcpO1xuICAgICAgICAkdGl0bGVTdGlja3lCYXJJbmZvLmFwcGVuZCgnPHNwYW4+JyArICRuYW1lUHJvZHVjdFN0aWNreUJhckluZm8udGV4dCgpICsgJzwvc3Bhbj4nKTtcbiAgICB9XG59Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNwRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQ3JFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDNURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBIiwic291cmNlUm9vdCI6IiJ9